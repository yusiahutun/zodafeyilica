<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Since 1974, the Linux grep command has been helping people find strings in files. But sometimes grep is just too thorough. Here are several ways to tell grep to ignore different things. The grep command searches text files looking for strings that match the search patterns you provide on the command line. The power of"><meta name=generator content="Hugo 0.98.0"><meta name=robots content="index,follow,noarchive"><title>How to Exclude Patterns, Files, and Directories With grep &#183;</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/blackburn.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel=stylesheet type=text/css><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><link rel="shortcut icon" href=./img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=./index.html>RaveBlog</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=./index.html><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=./post/index.html><i class="fa fa-list fa-fw"></i>Posts</a></li><li class=pure-menu-item><a class=pure-menu-link href=./sitemap.xml><i class="fa fa-user fa-fw"></i>Sitemap</a></li><li class=pure-menu-item><a class=pure-menu-link href=./index.xml><i class="fa fa-phone fa-fw"></i>RSS</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list></ul></div><div><div class=small-print><small>&copy; 2022. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>How to Exclude Patterns, Files, and Directories With grep</h1><h2>Since 1974, the Linux grep command has been helping people find strings in files. But sometimes grep is just too thorough. Here are several ways to tell grep to ignore different things. The grep command searches text files looking for strings that match the search patterns you provide on the command line. The power of</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i>
<time>25 Apr 2024, 00:00</time></div></div><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>The grep Command</a></li></ul><ul class=table-content-level-1><li><a href=#>Excluding Patterns</a></li></ul><ul class=table-content-level-1><li><a href=#>Excluding Files</a></li></ul><ul class=table-content-level-1><li><a href=#>Excluding Directories</a></li></ul><ul class=table-content-level-1><li><a href=#>Sometimes It's What You Leave Out</a></li></ul><p>Since 1974, <a href=#>the Linux <code>grep</code> command</a> has been helping people find strings in files. But sometimes <code>grep</code> is just too thorough. Here are several ways to tell <code>grep</code> to ignore different things.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=the-grep-command>The grep Command</h2><p>The <code>grep</code> command searches text files looking for strings that match the search patterns you provide on the command line. The power of <code>grep</code> lies in its use of regular expressions. These let you describe what you're looking for, rather than have to explicitly define it.</p><p>The birth of <code>grep</code> pre-dates Linux. it was developed in the early 1970s on Unix. It takes its name from the g/re/p key sequence in the</p><pre><code class=hljs>ed</code> </pre><p>line editor (incidentally, pronounced "ee-dee"). This stood for&nbsp;<strong>g</strong>lobal,&nbsp;<strong>re</strong>gular express search,&nbsp;<strong>p</strong>rint matching lines.</p><p><code>grep</code> is famously---perhaps, notoriously---thorough and single-minded. Sometimes it'll search files or directories you'd rather it didn't waste its time on, because the results can leave you unable to see the wood for the trees.</p><p><span class=related-single>Related: <a href=#>How to Use the grep Command on Linux</a></span></p><p>Of course, there are ways to reign grep in. You can tell it to ignore patterns, files, and directories so that grep completes its searches faster, and you're not swamped with meaningless false positives.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=excluding-patterns>Excluding Patterns</h2><p>To search with <code>grep</code> you can <a href=#>pipe</a> input to it from some other process such as</p><pre><code class=hljs>cat</code> </pre><p>, or you can provide a filename as the last command line parameter.</p><p>We're using a short file that contains the text of the poem&nbsp;<a href=#>Jabberwocky</a>, by Lewis Carroll. In these two examples, we're searching for lines that match the search term "Jabberwock."</p><pre>cat jabberwocky.txt | grep "Jabberwock"</pre><pre>grep "Jabberwock" jabberwocky.text</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/1-3.png><p>The lines that contain matches to the search clue are listed for us, with the matching element in each line highlighted in red. That's straightforward searching. But what if we want to exclude lines that contain the word "Jabberwock" and print the rest?</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We can accomplish that with the <code>-v</code> (invert match) option. This lists the lines that don't match the search term.</p><pre>grep -v "Jabberwock" jabberwocky.text</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/2-4.png><p>The lines that don't contain "Jabberwock" are listed to the terminal window.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/3-3.png><p>We can exclude as many terms as we wish. Let's filter out any lines that contain "Jabberwock" and any lines that contain "and." To achieve this we'll use the <code>-e</code> (expression) option. We need to use it for each search pattern we're using.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>grep -v -e "Jabberwock" -e "and" jabberwocky.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/4-3.png><p>There's a corresponding drop in the number of lines in the output.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/5-3.png><p>If we use the <code>-E</code> (extended <a href=#>regexes</a>) option, we can combine the search patterns with "<code>|</code>", which in this context doesn't indicate a pipe, it's the logical <code>OR</code> operator.</p><pre>grep -Ev "Jabberwock|and" jabberwocky.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/6-3.png><p>We get exactly the same output as we did with the previous, longer-winded command.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/7-3.png><p>The format of the command is the same if you want to use a regex pattern instead of an explicit search clue. This command will exclude all lines that start with any letter in the set of "ACHT."</p><pre>grep -Ev "^ACHT" jabberwocky.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/8-3.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>To see lines that contain a pattern but which also don't contain another pattern, we can pipe <code>grep</code> into <code>grep</code> . We'll search for all lines that contain the word "Jabberwock" and then filter out any lines that&nbsp;also&nbsp;contain the word "slain."</p><pre>grep "Jabberwock" jabberwocky.txt | grep -v "slain"</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/9-3.png><h2 id=excluding-files>Excluding Files</h2><p>We can ask <code>grep</code> to look for a string or pattern in a collection of files. You could list each file on the command line, but with many files that approach doesn't scale.</p><pre>grep "vorpal" verse-1.txt verse-2.txt verse-3.txt verse-4.txt verse-5.txt verse-6.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/10-3.png><p>Note that the name of the file containing the matching line is displayed at the start of each line of output.</p><p>To reduce typing we can use wildcards. But that can be counterintuitive. This appears to work.</p><pre>grep "vorpal" *.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/11-3.png><p>However, in this directory there are other TXT files, with nothing to do with the poem. If we search for the word "sword" with the same command structure, we get a lot of false positives.</p><pre>grep "sword" *.txt</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/12-2.png><p>The results we want are masked by the deluge of false results from the other files that have the TXT extension.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/13-2.png><p>The word "vorpal" didn't match anything, but "sword" is included in the word "password" so it was found many times in some pseudo-logfiles.</p><p>We need to exclude these files. To do that we'll use the <code>--exclude</code> option. To exclude a single file called "vol-log-1.txt" we'd use this command:</p><pre>grep --exclude=vol-log-1.txt "sword" *.txt</pre><p>In this instance, we want to exclude multiple log files with names that start with "vol." The syntax we need is:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>grep --exclude=vol*.txt "sword" *.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/14-2.png><p>When we use the <code>-R</code> (dereference-recursive) option <code>grep</code> will search entire directory trees for us. By default, it will search through all files in those locations. There may well be multiple types of files we wish to exclude.</p><p>Beneath the current directory on this test machine, there are nested directories containing logfiles, <a href=#>CSV files</a>, and MD files. These are all types of text files that we want to exclude. We could use an <code>--exclude</code> option for each file type, but we can achieve what we want more efficiently by grouping the file types.</p><p>This command excludes all files that have CSV or MD extensions, and all TXT files whose names start with either "vol" or "log."</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>grep -R --exclude=*.{csv,md} --exclude={vol*,log*}.txt "sword" /home/dave/data/</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/15-2.png><h2 id=excluding-directories>Excluding Directories</h2><p>If the files we want to ignore are contained in directories and there are no files in those directories that we do want to search, we can exclude those entire directories.</p><p>The concept is very similar to that of excluding files, except we use the <code>--exclude-dir</code> option and name the directories to ignore.</p><pre>grep -R --exclude-dir=backup "vorpal" /home/dave/data</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/16-2.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We've excluded the "backup" directory, but we're still searching through another directory called "backup2."</p><p>It'll come as no surprise that we can use the <code>--exclude-dir</code> option multiple times in a single command. Note that the path to excluded directories should be given relative to the directory the search will start in. Don't use the absolute path from the root of the file system.</p><pre>grep -R --exclude-dir=backup --exclude-dir=backup2 "vorpal" /home/dave/data</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/16-3.png><p>We can use groupings too. We can achieve the same thing more succinctly with:</p><pre>grep -R --exclude-dir={backup,backup2} "vorpal" /home/dave/data</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/18-1.png><p>You can combine <a href=#>file and directory</a> exclusions in the same command. If you want to exclude all files from a directory and exclude certain file types from the directories that are searched, use this syntax:</p><pre>grep -R --exclude=*.{csv,md} --exclude-dir=backup/archive "frumious" /home/dave/data</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/19-1.png><h2 id=sometimes-it-s-what-you-leave-out>Sometimes It's What You Leave Out</h2><p>Sometimes with <code>grep</code> it can feel like you're trying to find a needle in a haystack. it makes a big difference to remove the haystack.</p><p><span class=related-single>Related: <a href=#>How to Use Regular Expressions (regexes) on Linux</a></span></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGhvaW1jboVwtM6wZK2nXZrFpLjUnZxmqJGpwaa%2Bzaxkn6GcmsBurc2dZJ2hopqwtbvRopysZaeewal5xqucqWc%3D</p><h4><i class="fas fa-share-alt" aria-hidden=true></i>&nbsp;Share!</h4><ul class=share-buttons><li><a href="https://www.facebook.com/sharer/sharer.php?u=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title="Share on Facebook"><i class="fab fa-facebook" aria-hidden=true></i><span class=sr-only>Share on Facebook</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://twitter.com/intent/tweet?source=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title=Tweet><i class="fab fa-twitter" aria-hidden=true></i><span class=sr-only>Tweet</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://plus.google.com/share?url=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title="Share on Google+"><i class="fab fa-google-plus" aria-hidden=true></i><span class=sr-only>Share on Google+</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.tumblr.com/share?v=3&u=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden=true></i><span class=sr-only>Post to Tumblr</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://pinterest.com/pin/create/button/?url=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title="Pin it"><i class="fab fa-pinterest-p" aria-hidden=true></i><span class=sr-only>Pin it</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.reddit.com/submit?url=%2fhow-to-exclude-patterns-files-and-directories-with-grep.html" target=_blank title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden=true></i><span class=sr-only>Submit to Reddit</span></a></li></ul><style>ul.share-buttons{list-style:none;padding:0}ul.share-buttons li{display:inline}ul.share-buttons .sr-only{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}</style><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=./katie-price-flogs-makeup-masterclasses-26578674.html><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=./katie-price-flogs-makeup-masterclasses-26578674.html>Katie Price flogs makeup masterclasses for 80 on Instagram</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=./hit-netflix-k-reality-show-singles-inferno-draws-anger-over.html>Hit Netflix K-reality show Singles Inferno draws anger over white skin comments from contes</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=./hit-netflix-k-reality-show-singles-inferno-draws-anger-over.html><i class="fa fa-chevron-right"></i></a></div></div></div></div></div><script src=https://assets.cdnweb.info/hugo/blackburn/js/ui.js></script>
<script src=https://assets.cdnweb.info/hugo/blackburn/js/menus.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>